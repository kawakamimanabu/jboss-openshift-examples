# log4j2 app for JBoss EAP8 example
## Environment
* JBoss EAP 8.0.5.1
* OpenJDK17
* OpenShift 4.16
* log4j 2.24.3 with json template
* Clustering/HttpSession replication is disabled in this example

## Steps to deploy for OpenShift 4.16
```
git clone https://github.com/nagetsum/jboss-openshift-examples.git
cd log4j2-on-eap8
./mvnw package
cp target/ROOT.war src/main/docker/
cd src/main/docker/
oc new-project eap8-log4j2-demo
oc new-build --name=eap8-log4j2-demo --binary=true
oc start-build eap8-log4j2-demo --from-dir=. --follow
oc new-app eap8-log4j2-demo
oc expose service/eap8-log4j2-demo
```

## Example log messages
```
// application log generated by log4j2
{"@version":1,"source_host":"eap8-log4j2-demo-6b7dbc794c-wk7nh","message":"Log4j2, Hello world!","thread_name":"default task-1","@timestamp":"2025-02-18T05:38:22.825+0000","level":"INFO","logger_name":"org.example.logging.LoggingServlet"}

// eap server.log
{"@timestamp":"2025-02-18T05:35:58.93Z","sequence":66,"loggerClassName":"org.jboss.as.server.logging.ServerLogger_$logger","loggerName":"org.jboss.as","level":"INFO","message":"WFLYSRV0025: JBoss EAP 8.0 Update 5.1 (WildFly Core 21.0.13.Final-redhat-00001) started in 1794ms - Started 359 of 592 services (324 services are lazy, passive or on-demand) - Server configuration file in use: standalone.xml","threadName":"Controller Boot Thread","threadId":54,"mdc":{},"ndc":"","hostName":"eap8-log4j2-demo-6b7dbc794c-wk7nh","processName":"jboss-modules.jar","processId":495,"@version":"1"}

// eap access log with duration milliseconds
{"eventSource":"web-access","hostName":"default-host","@version":"1","source_host":"eap8-log4j2-demo-6b7dbc794c-wk7nh","bytesSent":22,"timestamp":"2025-02-18T05:38:22836","remoteHost":"10.0.88.46","remoteUser":null,"requestHeader-Referer":null,"requestHeader-User-Agent":"curl/7.76.1","requestHeader-Cookie":null,"requestLine":"GET /log HTTP/1.1","responseCode":200,"responseHeader-Set-Cookie":null,"responseTime":333,"threadName":"default task-1"}
```